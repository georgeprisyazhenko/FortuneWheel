# E2E Тесты для FortuneWheel

Этот документ описывает все E2E тесты, созданные для проекта FortuneWheel.

## Структура тестов

Все E2E тесты находятся в файле `tests/e2e/basic.spec.ts` и организованы в следующие группы:

### 1. Home Page (Главная страница)

Тесты для проверки функциональности главной страницы:

- ✅ **home page loads and displays main elements** - Проверяет загрузку главной страницы и отображение основных элементов
- ✅ **opens create team modal when button is clicked** - Проверяет открытие модального окна создания команды
- ✅ **closes modal when cancel button is clicked** - Проверяет закрытие модального окна по кнопке "Отмена"
- ✅ **closes modal when clicking outside** - Проверяет закрытие модального окна при клике вне его области
- ✅ **creates team with valid name and navigates to team page** - Проверяет создание команды с валидным именем и переход на страницу команды
- ✅ **creates team by pressing Enter in input field** - Проверяет создание команды по нажатию Enter
- ✅ **shows error message when team creation fails** - Проверяет отображение сообщения об ошибке при неудачном создании команды
- ✅ **does not create team with empty name** - Проверяет, что команда не создается с пустым именем
- ✅ **trims whitespace from team name** - Проверяет обрезку пробелов в начале и конце имени команды

### 2. Team Page (Страница команды)

Тесты для проверки функциональности страницы команды:

- ✅ **displays team page with all main elements** - Проверяет отображение всех основных элементов страницы команды
- ✅ **shows empty state when no members** - Проверяет отображение пустого состояния, когда нет участников
- ✅ **adds new member** - Проверяет добавление нового участника
- ✅ **adds member by pressing Enter** - Проверяет добавление участника по нажатию Enter
- ✅ **does not add member with empty name** - Проверяет, что участник не добавляется с пустым именем
- ✅ **toggles vacation status for member** - Проверяет переключение статуса отпуска для участника
- ✅ **deletes member** - Проверяет удаление участника
- ✅ **edits team name** - Проверяет редактирование названия команды
- ✅ **navigates back to home page** - Проверяет переход обратно на главную страницу

### 3. Wheel Functionality (Функциональность колеса)

Тесты для проверки работы колеса фортуны:

- ✅ **displays wheel with members** - Проверяет отображение колеса с участниками
- ✅ **spins wheel and selects winner** - Проверяет вращение колеса и выбор победителя
- ✅ **shows message when trying to spin with no available members** - Проверяет отображение сообщения при попытке крутить колесо без доступных участников
- ✅ **disables spin button when all members are on vacation** - Проверяет поведение кнопки, когда все участники в отпуске
- ✅ **excludes vacation members from wheel display** - Проверяет исключение участников в отпуске из отображения колеса

### 4. Error Handling (Обработка ошибок)

Тесты для проверки обработки ошибок:

- ✅ **shows error when team not found** - Проверяет отображение ошибки, когда команда не найдена
- ✅ **navigates to home when clicking 'На главную' on error page** - Проверяет переход на главную страницу при клике на кнопку "На главную" на странице ошибки

## Всего тестов: 26

- Home Page: 9 тестов
- Team Page: 9 тестов
- Wheel Functionality: 5 тестов
- Error Handling: 2 теста

## Запуск тестов

Для запуска E2E тестов используйте:

```bash
npm run e2e
```

Или для запуска в headless режиме:

```bash
npm run e2e:headless
```

**Важно:** Перед запуском E2E тестов убедитесь, что:
1. Приложение запущено на `http://localhost:3001` (или измените `baseURL` в `playwright.config.ts`)
2. База данных Supabase настроена и доступна
3. Все необходимые переменные окружения установлены

## Примечания

- Тесты используют реальную базу данных Supabase, поэтому каждый тест создает реальные записи
- Для изоляции тестов используются уникальные имена команд с временными метками
- Некоторые тесты требуют ожидания анимаций (например, вращение колеса занимает ~4 секунды)
- Тесты могут быть чувствительны к скорости сети и производительности базы данных
